<section>
			<!-- Start Hero Section -->
			<div class="hero">
				<div class="container">
					<div class="row justify-content-between">
						<div class="col-lg-5">
							<div class="intro-excerpt">
								<h1>Cart</span></h1>
							</div>
						</div>
						<div class="col-lg-7">
							<div class="hero-img-wrap">
								<img src="images/couch.png" class="img-fluid">
							</div>
						</div>
					</div>
				</div>
			</div>
		<!-- End Hero Section -->
        
		{{!-- cart section --}}
			<div class="untree_co-section before-footer-section">
            <div class="container">
              {{#if products}}
               <div class="row mb-5">
                <form class="col-md-12" method="post">
                  <div class="site-blocks-table">
                    <table class="table">
                      <thead>
                        <tr>
                          <th class="product-thumbnail">Image</th>
                          <th class="product-name">Product</th>
                          <th class="product-price">Price</th>
                          <th class="product-quantity">Quantity</th>
                          
                          <th class="product-remove">Remove</th>
                        </tr>
                      </thead>
                      <tbody>
                        {{#each products}}
                        <tr>
                          <td class="product-thumbnail">
                            <img src="{{this.images.[0]}}" alt="Image" class="img-fluid">
                          </td>
                          <td class="product-name">
                            <h2 class="h5 text-black">{{this.name}}</h2>
                          </td>
                          <td>{{this.price}}</td>
                          <td >
                            <div class="input-group mb-3 ml-3 d-flex align-items-center quantity-container" style="max-width: 120px;">
                              <div class="input-group-prepend">
                                <button class="btn btn-outline-black decrease" type="button">&minus;</button>
                              </div>
                              <input type="text" disabled class="form-control text-center quantity-amount" value="{{this.quantity}}" placeholder="" aria-label="Example text with button addon" aria-describedby="button-addon1">
                              <div class="input-group-append">
                                <button class="btn btn-outline-black increase" type="button" onclick="incrementProduct({{this.productId}},{{this.cartId}})">+</button>

                              </div>
                            </div>
        
                          </td>
                          <td><a href="rfcart/{{@index}}" class="btn btn-black btn-sm">X</a></td>
                        </tr>
                        {{/each}}
                        
                      </tbody>
                    </table>
                  </div>
                </form>
              </div>

               <div class="row">
                <div class="col-md-6 d-flex">
                  <div class="row mb-5">
                    <div class="col-md-6 mb-3 mb-md-0">
                     <a href="/shop" class="btn btn-black btn-sm btn-block">Continue Shopping</a>
                    </div>
                  </div>
                  
        
                      <div class="row">
                        <div class="col-md-12">
                          <a href="checkout" class="btn btn-black btn-lg py-3 btn-block">Proceed To Checkout</a>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            {{else}}
            <b><i>Your cart is Empty</i></b>
            {{/if}}
             
        
             
            </div>
          </div>
		
		</section>
<script>
  function incrementProduct(productId,cartId) {
    // Get the current quantity value
    let currentQuantity = parseInt(document.getElementById('quantity-amount').value, 10);

    // Increment the quantity
    currentQuantity++;

    // Update the display
    document.getElementById('quantity-amount').value = currentQuantity;

    // Update the database via AJAX
    updateDatabase(productId, currentQuantity,cartId);
  }

  function updateDatabase(productId, newQuantity,cartId) {
    // Perform an AJAX request to update the database
    // Use the productId and newQuantity in the request data

    // Example using Fetch API
    fetch('/update-product', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        productId: productId,
        newQuantity: newQuantity,
        cartId:cartId
      }),
    })
      .then(response => response.json())
      .then(data => {
        // Handle the response, if needed
        console.log('Database updated successfully:', data);
      })
      .catch(error => {
        console.error('Error updating database:', error);
      });
  }
</script>
